<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FARMACIA IS</title>
    <link rel="stylesheet" href="../css/listar-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="../imag/logos/pharmacy.ico"> 
</head>
<body>
    <div class="content">
        <h1>Listado de Medicamentos</h1>

        <form class="search-form">
            <label for="idProducto">Buscar por ID de Producto:</label>
            <input type="text" id="idProducto" name="idProducto" required>
            <button type="submit">Buscar</button>
        </form>


        <div id="tablaMedicamentos">
            <table class="clientes-table">
              <thead>
                <tr>
                  <th>ID Medicamento</th>
                  <th>Nombre_Medicamento</th>
                  <th>Número_Lote</th>
                  <th>ID_Producto</th>
                  <th>ID_Tipo_Medicamento</th>
                  <th>Imagen</th>
                  <th>Precio</th>
                  <th>Existencias</th>
                  <th>Fecha_Vencimiento</th>
                  <th>Fecha_Elaboración</th>
                  <th>Descripcion</th>
                  <th> </th>
                </tr>
              </thead>
              <tbody>
                <!-- Aquí se agregarán las filas de medicamentos -->
              </tbody>
            </table>
          </div>
          


        
            
                    
                

        
                    
             

        <div class="back-button">
            <a href="../html/admiMenu.html"><i class="fas fa-chevron-left"></i> Volver</a>
        </div>
    </div>
    <script>

document.addEventListener('DOMContentLoaded', async () => {
  const tablaMedicamentos = document.getElementById('tablaMedicamentos');
  
  try {
    const response = await fetch('/obtener-todos-medicamentos'); // Cambia la URL si es diferente
    
    if (response.ok) {
      const data = await response.json();
      console.log(data); // Verifica la estructura de los datos aquí
      
      const tbody = tablaMedicamentos.querySelector('tbody');
      
      // Limpiar el contenido actual de la tabla
      tbody.innerHTML = '';

      // Recorrer los datos y crear las filas
      data.data.forEach(medicamento => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${medicamento.ID_MEDICAMENTO}</td>
          <td>${medicamento.NOMBRE_MEDICAMENTO}</td>
          <td>${medicamento.NUMERO_LOTE}</td>
          <td>${medicamento.ID_PRODUCTO}</td>
          <td>${medicamento.ID_TIPO_MEDICAMENTO}</td>
          <td>${medicamento.IMAGEN}</td>
          <td>${medicamento.PRECIO}</td>
          <td>${medicamento.EXISTENCIAS}</td>
          <td>${medicamento.FECHA_VENCIMIENTO}</td>
          <td>${medicamento.FECHA_ELABORACION}</td>
          <td>${medicamento.DESCRIPCION}</td>
          <td></td>
        `;
        
        // Usar textContent para asignar texto de manera segura
        row.querySelectorAll('td').forEach(cell => {
          cell.textContent = cell.textContent;
        });

        tbody.appendChild(row);
      });
    } else {
      console.error('Error al obtener los medicamentos');
    }
  } catch (error) {
    console.error('Error al cargar medicamentos:', error);
  }
});








       

     


    </script>
</body>
<style>
    .acciones {
        text-align: right;
    }
    .eliminar-button {
        text-align: right;
        color: brown;
        width: 10px;
    }
    .editar-button {
        text-align: right; 
        width: 10px;
        color: rgb(138, 128, 128);
       }
</style>
<script src="../JS/index.js"></script>
</html>
